<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Booking Mountain Bike</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link href="css/stylesAlessia.css" rel="stylesheet" type="text/css"> 
</head>

<body>
    <div class="container-fluid header top-175 padding-100">    
        <div class="row justify-content-between">
            <a href="4.2.1_transports-Mountain-Bike.html" class="col-auto">
                <svg width="95" height="95" viewBox="0 0 95 95" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M50.3016 22.5913C51.8474 21.0455 51.8474 18.5392 50.3016 16.9934C48.7557 15.4475 46.2495 15.4475 44.7036 16.9934L16.9953 44.7017C15.4495 46.2475 15.4495 48.7538 16.9953 50.2996L44.7036 78.0079C46.2495 79.5538 48.7557 79.5538 50.3016 78.0079C51.8474 76.4621 51.8474 73.9558 50.3016 72.41L29.3505 51.459L75.2109 51.459C77.3971 51.459 79.1693 49.6868 79.1693 47.5007C79.1693 45.3145 77.3971 43.5423 75.2109 43.5423L29.3505 43.5423L50.3016 22.5913Z" fill="#C8F1F9"/>
                </svg>
            </a>
            <h1 class="col bottom-180">Prenota</h1>
        </div> 
    </div>

    <div class="container-fluid padding-100">       
        <div class="row justify-content-center margin-insurance-70"> 
            <h3 class="col align-items-star">Seleziona la quantità da noleggiare</h3>
        </div>
        
        <div class="row d-flex margin-b-transports counter-rent bottom-110" data-card-id="sup"> 
            <p class="col-2">MTB Full Elettrica</p>
            <div class="col-2 counter-transports justify-content-center">
                <div class="d-flex">
                    <button class="counter-button minus counter-sign">-</button>
                    <span class="number">0</span>
                    <button class="counter-button plus counter-button-plus counter-sign">+</button>
                </div>
            </div>
        </div>
 
        <div class="row justify-content-center margin-insurance-70"> 
            <h3 class="col align-items-star">Seleziona l’assicurazione che desideri</h3>
        </div>
        <div class="row d-flex justify-content-evenly"> 
            <button id="base-button" class="custom-button-base space-insurance-340">Assicurazione base</button>
            <button id="super-button" class="custom-button-base custom-button-super">Assicurazione super</button>        
        </div>
    </div>

    <div class="bottom-110"></div>

   <div class="row padding-100">
  <div class="col">
    <div class="row calendarbody g-0 calendar-wrapper" data-calendar-id="1">
      <div class="calendarheader col-12"><p>Seleziona data e ora:</p></div>
      <div class="col calendar">
        <div class="row g-0">
          <div class="col-7 border-right">
            <div class="calendar-selector">
              <button class="prev-month">
                <!-- SVG Left Arrow -->
              </button>
              <h3><span class="current-month">Mese corrente</span></h3>
              <button class="next-month">
                <!-- SVG Right Arrow -->
              </button>
            </div>
            <div class="days days-container"></div>
          </div>
          <div class="col-5">
            <div class="time-selector calendar-selector">
              <h3>Orario</h3>
            </div>
            <div class="time-options">
              <p class="time-option">8:00</p>
              <p class="time-option">9:00</p>
              <p class="time-option">10:00</p>
              <p class="time-option">11:00</p>
              <p class="time-option">12:00</p>
              <p class="time-option">13:00</p>
              <p class="time-option">14:00</p>
              <p class="time-option">15:00</p>
              <p class="time-option">16:00</p>
              <p class="time-option">17:00</p>
              <p class="time-option">18:00</p>
              <p class="time-option">19:00</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Copia esatta per secondo calendario -->
<div class="row padding-100">
  <div class="col">
    <div class="row calendarbody g-0 calendar-wrapper" data-calendar-id="2">
      <div class="calendarheader col-12"><p>Seleziona data e ora:</p></div>
      <div class="col calendar">
        <div class="row g-0">
          <div class="col-7 border-right">
            <div class="calendar-selector">
              <button class="prev-month">
                <!-- SVG Left Arrow -->
              </button>
              <h3><span class="current-month">Mese corrente</span></h3>
              <button class="next-month">
                <!-- SVG Right Arrow -->
              </button>
            </div>
            <div class="days days-container"></div>
          </div>
          <div class="col-5">
            <div class="time-selector calendar-selector">
              <h3>Orario</h3>
            </div>
            <div class="time-options">
              <p class="time-option">8:00</p>
              <p class="time-option">9:00</p>
              <p class="time-option">10:00</p>
              <p class="time-option">11:00</p>
              <p class="time-option">12:00</p>
              <p class="time-option">13:00</p>
              <p class="time-option">14:00</p>
              <p class="time-option">15:00</p>
              <p class="time-option">16:00</p>
              <p class="time-option">17:00</p>
              <p class="time-option">18:00</p>
              <p class="time-option">19:00</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

    <div class="margin-insurance-70"></div>

    <div class="d-flex justify-content-center"> 
        <a href="4.2.1.1_summary-Mountain-Bike copy.html" class="button booking-btn">Prenota</a>  
    </div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>

/****CALENDARIO 1****/

document.querySelectorAll('.calendar-wrapper').forEach((wrapper, index) => {
  const monthEl = wrapper.querySelector('.current-month');
  const daysContainer = wrapper.querySelector('.days-container');
  const prevBtn = wrapper.querySelector('.prev-month');
  const nextBtn = wrapper.querySelector('.next-month');
  const timeOptions = wrapper.querySelectorAll('.time-option');

  let currentDate = new Date();
  let selectedDay = null;
  let selectedTime = null;

  const getMonthName = monthIndex => [
    'Gennaio', 'Febbraio', 'Marzo', 'Aprile', 'Maggio', 'Giugno',
    'Luglio', 'Agosto', 'Settembre', 'Ottobre', 'Novembre', 'Dicembre'
  ][monthIndex];

  const generateCalendar = () => {
    const year = currentDate.getFullYear();
    const month = currentDate.getMonth();
    const firstDay = new Date(year, month, 1).getDay();
    const daysInMonth = new Date(year, month + 1, 0).getDate();

    daysContainer.innerHTML = '';

    for (let i = 0; i < firstDay; i++) {
      const empty = document.createElement('div');
      empty.classList.add('day', 'empty');
      daysContainer.appendChild(empty);
    }

    for (let d = 1; d <= daysInMonth; d++) {
      const dayEl = document.createElement('div');
      dayEl.classList.add('day');
      dayEl.textContent = d;

      dayEl.addEventListener('click', () => {
        if (selectedDay) selectedDay.classList.remove('selected');
        dayEl.classList.add('selected');
        selectedDay = dayEl;
        saveSelection();
      });

      daysContainer.appendChild(dayEl);
    }

    monthEl.textContent = `${getMonthName(month)} ${year}`;
  };

  prevBtn.addEventListener('click', () => {
    currentDate.setMonth(currentDate.getMonth() - 1);
    generateCalendar();
  });

  nextBtn.addEventListener('click', () => {
    currentDate.setMonth(currentDate.getMonth() + 1);
    generateCalendar();
  });

  timeOptions.forEach(option => {
    option.addEventListener('click', () => {
      if (selectedTime) selectedTime.classList.remove('selected');
      option.classList.add('selected');
      selectedTime = option;
      saveSelection();
    });
  });

  function saveSelection() {
    const selectedDate = selectedDay?.textContent?.trim();
    const selectedMonth = getMonthName(currentDate.getMonth());
    const selectedYear = currentDate.getFullYear();
    const selectedHour = selectedTime?.textContent?.trim();

    if (selectedDate && selectedHour) {
      const calendarId = wrapper.dataset.calendarId;
      const selectedData = {
        date: `${selectedDate} ${selectedMonth} ${selectedYear}`,
        time: selectedHour
      };
      localStorage.setItem(`selectedData-${calendarId}`, JSON.stringify(selectedData));
      console.log(`Dati salvati calendario ${calendarId}:`, selectedData);
    }
  }

  generateCalendar();
});

/*gestione bottoni assicurazioni*/
document.addEventListener("DOMContentLoaded", () => {
            const baseButton = document.querySelector("#base-button");
            const superButton = document.querySelector("#super-button");

            baseButton.addEventListener("click", () => {
                baseButton.classList.add("selected"); 
                superButton.classList.remove("selected"); 
            });

            superButton.addEventListener("click", () => {
                superButton.classList.add("selected"); 
                baseButton.classList.remove("selected"); 
            });
        });

/***** Gestione counter *****/
document.querySelectorAll(".counter-rent").forEach(counterRent => {
            const minusButton = counterRent.querySelector(".minus");
            const plusButton = counterRent.querySelector(".plus");
            const numberSpan = counterRent.querySelector(".number");
            const cardId = counterRent.dataset.cardId; 

            // Recupera valore dal localStorage se esiste
            let currentValue = localStorage.getItem(`counterValue-${cardId}`);
            numberSpan.textContent = currentValue !== null ? currentValue : 0;

            minusButton.addEventListener("click", () => {
                let value = parseInt(numberSpan.textContent, 10) || 0;
                value = Math.max(0, value - 1); // Evita valori negativi
                numberSpan.textContent = value;
                localStorage.setItem(`counterValue-${cardId}`, value);
            });

            plusButton.addEventListener("click", () => {
                let value = parseInt(numberSpan.textContent, 10) || 0;
                value++;
                numberSpan.textContent = value;
                localStorage.setItem(`counterValue-${cardId}`, value);
            });
        });
    
    </script>

</body>