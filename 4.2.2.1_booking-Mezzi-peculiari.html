<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Booking Mezzi peculiari</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link href="css/style.css" rel="stylesheet" type="text/css"> 
</head>
<body>
    
    <div class="container-fluid header reset-padding">    
        <div class="row justify-content-between reset-margin padding-100">
            <h1 class="col reset-padding">Prenota</h1>
            <a href="4.2.2_transports-Mezzi-peculiari.html" class="col-auto reset-padding">
                <svg width="125" height="125" viewBox="0 0 125 125" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M93.7515 31.2495C92.7748 30.2731 91.4503 29.7246 90.0692 29.7246C88.6881 29.7246 87.3636 30.2731 86.3869 31.2495L62.5015 55.135L38.6161 31.2495C37.6394 30.2731 36.3148 29.7246 34.9338 29.7246C33.5527 29.7246 32.2282 30.2731 31.2515 31.2495C30.2751 32.2262 29.7266 33.5508 29.7266 34.9318C29.7266 36.3129 30.2751 37.6374 31.2515 38.6141L55.1369 62.4995L31.2515 86.385C30.2751 87.3617 29.7266 88.6862 29.7266 90.0673C29.7266 91.4483 30.2751 92.7728 31.2515 93.7495C32.2282 94.726 33.5527 95.2745 34.9338 95.2745C36.3148 95.2745 37.6394 94.726 38.6161 93.7495L62.5015 69.8641L86.3869 93.7495C87.3636 94.726 88.6881 95.2745 90.0692 95.2745C91.4503 95.2745 92.7748 94.726 93.7515 93.7495C94.7279 92.7728 95.2764 91.4483 95.2764 90.0673C95.2764 88.6862 94.7279 87.3617 93.7515 86.385L69.8661 62.4995L93.7515 38.6141C94.7279 37.6374 95.2764 36.3129 95.2764 34.9318C95.2764 33.5508 94.7279 32.2262 93.7515 31.2495Z" fill="#C8F1F9"/>
                </svg>
            </a>
        </div> 
    </div>

    <div class="container-fluid padding-100">
        <div class="row justify-content-center margin-70"> 
            <h3 class="col reset-all align-items-star">Seleziona la quantità da noleggiare</h3>
        </div>

        <div class="row d-flex margin-b-transports"> 
            <p class=" col-2 reset-all"> SUP</p>
            <div class="col-2 reset-padding counter-transports">
                <div class="d-flex">
                    <button id="minus-1" class="counter-button minus"><p class="no-bottom reset-margin counter-sign">-</p></button>
                    <span class="number">0</span>
                    <button id="plus-1" class="counter-button plus"><p class="no-bottom reset-margin counter-sign">+</p></button>
                </div>
            </div>
        </div>

        <div class="row justify-content-center margin-70"> 
            <h3 class="col reset-all align-items-star">Seleziona l’assicurazione che desideri</h3>
        </div>

        <div class="row reset-margin"> 
            <button class="custom-button-base">Assicurazione base</button>
            <button class="custom-button-super">Assicurazione super</button>        
        </div>

    </div>

    <div> <!-- Calendario e fascia oraria -->
        <div class="calendarbody padding-100">
            <div class="calendarheader"><p>Seleziona data e ora del ritiro</p></div>
            <div class="container-fluid calendar">
                <div class="row">
                    <div class="col-7 border-right px-0">
                        <div class="calendar-selector">
                            <button id="prev-month">&lt;</button>
                            <h3><span id="current-month"></span></h3>
                            <button id="next-month">&gt;</button>
                        </div>
                        <div class="days" id="days-container"></div>
                    </div>
                    
                    <div class="col-5 reset-padding">
                        <div class="time-selector calendar-selector">
                            <h3>Orario</h3>
                        </div>
                        <div class="time-options">
                            <p class="time-option">8:00</p>
                            <p class="time-option">9:00</p>
                            <p class="time-option">10:00</p>
                            <p class="time-option">11:00</p>
                            <p class="time-option">12:00</p>
                            <p class="time-option">13:00</p>
                            <p class="time-option">14:00</p>
                            <p class="time-option">15:00</p>
                            <p class="time-option">16:00</p>
                            <p class="time-option">17:00</p>
                            <p class="time-option">18:00</p>
                            <p class="time-option">19:00</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="space-50"></div>
    
    <div> <!-- Calendario e fascia oraria -->
        <div class="calendarbody padding-100">
            <div class="calendarheader"><p>Seleziona data e ora della restituzione</p></div>
            <div class="container-fluid calendar">
                <div class="row">
                    <div class="col-7 border-right px-0">
                        <div class="calendar-selector">
                            <button id="prev-month">&lt;</button>
                            <h3><span id="current-month"></span></h3>
                            <button id="next-month">&gt;</button>
                        </div>
                        <div class="days" id="days-container"></div>
                    </div>
                    
                    <div class="col-5 reset-padding">
                        <div class="time-selector calendar-selector">
                            <h3>Orario</h3>
                        </div>
                        <div class="time-options">
                            <p class="time-option">8:00</p>
                            <p class="time-option">9:00</p>
                            <p class="time-option">10:00</p>
                            <p class="time-option">11:00</p>
                            <p class="time-option">12:00</p>
                            <p class="time-option">13:00</p>
                            <p class="time-option">14:00</p>
                            <p class="time-option">15:00</p>
                            <p class="time-option">16:00</p>
                            <p class="time-option">17:00</p>
                            <p class="time-option">18:00</p>
                            <p class="time-option">19:00</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="space-180"></div>

    <div> 
        <a href="4.2.2.1_summary-Mezzi-peculiari.html" class="col-auto header-button justify-content-center body">
            <button type="button" class="btn btn-primary">Prenota</button>
        </a>
    </div>
    <div class="bottom-150"> </div>
    
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>

    /****CALENDARIO****/
    
    document.addEventListener('DOMContentLoaded', () => {
        const currentMonthElement = document.getElementById('current-month');
        const daysContainer = document.getElementById('days-container');
        const prevMonthButton = document.getElementById('prev-month');
        const nextMonthButton = document.getElementById('next-month');
    
        let currentDate = new Date();
        let selectedDay = null;
        let selectedTime = null;
    
        function getMonthName(monthIndex) {
            const monthNames = [
                'Gennaio', 'Febbraio', 'Marzo', 'Aprile', 'Maggio', 'Giugno',
                'Luglio', 'Agosto', 'Settembre', 'Ottobre', 'Novembre', 'Dicembre'
            ];
            return monthNames[monthIndex];
        }
    
        function generateCalendar(date) {
            const year = date.getFullYear();
            const month = date.getMonth();
    
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
    
            daysContainer.innerHTML = '';
    
            for (let i = 0; i < firstDay; i++) {
                const emptySlot = document.createElement('div');
                emptySlot.classList.add('day', 'empty');
                daysContainer.appendChild(emptySlot);
            }
    
            for (let day = 1; day <= daysInMonth; day++) {
                const dayElement = document.createElement('div');
                dayElement.classList.add('day');
                dayElement.textContent = day;
    
                dayElement.addEventListener('click', () => {
                    if (selectedDay) {
                        selectedDay.classList.remove('selected');
                    }
                    dayElement.classList.add('selected');
                    selectedDay = dayElement;
                    saveSelection();
                });
    
                daysContainer.appendChild(dayElement);
            }
    
            currentMonthElement.textContent = `${getMonthName(month)} ${year}`;
        }
    
        prevMonthButton.addEventListener('click', () => {
            currentDate.setMonth(currentDate.getMonth() - 1);
            generateCalendar(currentDate);
        });
    
        nextMonthButton.addEventListener('click', () => {
            currentDate.setMonth(currentDate.getMonth() + 1);
            generateCalendar(currentDate);
        });
    
        /****SALVATAGGIO SELEZIONE****/
        function saveSelection() {
            const selectedDate = selectedDay ? selectedDay.textContent.trim() : null;
            const selectedMonth = getMonthName(currentDate.getMonth());
            const selectedYear = currentDate.getFullYear();
            const selectedHour = selectedTime ? selectedTime.textContent.trim() : null;
    
            if (selectedDate && selectedHour) {
                const selectedData = {
                    date: `${selectedDate} ${selectedMonth} ${selectedYear}`,
                    time: selectedHour
                };
    
                localStorage.setItem('selectedData', JSON.stringify(selectedData));
    
                console.log('Dati salvati:', selectedData);
            } else {
                console.warn('Seleziona sia una data che un orario.');
            }
        }
    
        const timeOptions = document.querySelectorAll('.time-option');
        timeOptions.forEach(time => {
            time.addEventListener('click', () => {
                if (selectedTime) {
                    selectedTime.classList.remove('selected');
                }
                time.classList.add('selected');
                selectedTime = time;
                saveSelection();
            });
        });
    
        generateCalendar(currentDate);
    });

/***** Gestione delle tariffe dinamiche *****/

const cards = document.querySelectorAll('.counter-transports');

function calculateTotalPrice() {
    let totalPrice = 0;

    cards.forEach(card => {
        const unitPrice = parseFloat(card.dataset.unitPrice);
        const quantity = parseInt(card.querySelector('.number').textContent, 10);
        totalPrice += unitPrice * quantity;
    });

    document.getElementById('total-price').textContent = `${totalPrice.toFixed(2)}€`;
}

function updateCounter(button, increment) {
    const counter = button.closest('.counter').querySelector('.number');
    let currentValue = parseInt(counter.textContent, 10);

    if (increment) {
        currentValue = currentValue + 1;
    } else {
        currentValue = Math.max(0, currentValue - 1);
    }

    counter.textContent = currentValue;

    calculateTotalPrice();
}

cards.forEach(card => {
    const minusButton = card.querySelector('.minus');
    const plusButton = card.querySelector('.plus');

    minusButton.addEventListener('click', () => {
        updateCounter(minusButton, false);
    });

    plusButton.addEventListener('click', () => {
        updateCounter(plusButton, true);
    });
});


    
    </script>

</body>