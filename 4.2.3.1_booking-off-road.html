<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Booking Fuoristrada</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link href="css/style.css" rel="stylesheet" type="text/css"> 
</head>

<body>   
    <div class="container-fluid header reset-padding bottom-180">    
        <div class="row justify-content-between reset-margin padding-100">
            <a href="4.2.3_transports-off-road.html" class="col-auto reset-padding">
                <svg width="95" height="95" viewBox="0 0 95 95" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M50.3016 22.5913C51.8474 21.0455 51.8474 18.5392 50.3016 16.9934C48.7557 15.4475 46.2495 15.4475 44.7036 16.9934L16.9953 44.7017C15.4495 46.2475 15.4495 48.7538 16.9953 50.2996L44.7036 78.0079C46.2495 79.5538 48.7557 79.5538 50.3016 78.0079C51.8474 76.4621 51.8474 73.9558 50.3016 72.41L29.3505 51.459L75.2109 51.459C77.3971 51.459 79.1693 49.6868 79.1693 47.5007C79.1693 45.3145 77.3971 43.5423 75.2109 43.5423L29.3505 43.5423L50.3016 22.5913Z" fill="#C8F1F9"/>
                </svg>
            </a>
            <h1 class="col reset-padding reset-margin">Prenota</h1>
        </div> 
    </div>

    <div class="container-fluid padding-100">        
        <div class="row justify-content-center margin-70"> 
            <h3 class="col reset-all align-items-star">Seleziona lâ€™assicurazione che desideri</h3>
        </div>

        <div class="row reset-margin d-flex justify-content-evenly"> 
            <button class="custom-button-base space-340" id="base-button">Assicurazione base</button>
            <button  class="custom-button-base custom-button-super" id="super-button">Assicurazione super</button>        
        </div>
    </div>

    <div class="margin-b-transports"></div>

    <div class="row padding-100">
        <div class="col">
            <div id="calendar-1" class="calendar-wrapper">
                <div class="calendarbody">
                    <div class="calendarheader">
                        <p>Seleziona data e ora del ritiro</p>
                    </div>
                    <div class="container-fluid calendar">
                        <div class="row">
                            <div class="col-7 border-right px-0">
                                <div class="calendar-selector">
                                    <button class="prev-month">
                                        <svg width="95" height="64" viewBox="0 0 95 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M32.5422 38.5997L50.6307 50.829C51.7406 51.579 53.2457 52.0002 54.8149 52C56.3842 51.9997 57.8891 51.578 58.9984 50.8277C60.1078 50.0773 60.7308 49.0597 60.7305 47.9987C60.7301 46.9378 60.1064 45.9204 58.9965 45.1703L40.908 32.9437C40.7244 32.8198 40.5786 32.6727 40.4792 32.5107C40.3798 32.3487 40.3286 32.175 40.3286 31.9997C40.3286 31.8243 40.3798 31.6506 40.4792 31.4886C40.5786 31.3267 40.7244 31.1795 40.908 31.0557L58.9965 18.829C60.1064 18.079 60.7301 17.0616 60.7305 16.0006C60.7308 14.9396 60.1078 13.9221 58.9984 13.1717C57.8891 12.4213 56.3842 11.9996 54.815 11.9993C53.2457 11.9991 51.7406 12.4203 50.6307 13.1703L32.5422 25.3997C29.9578 27.1518 28.5065 29.5252 28.5065 31.9997C28.5065 34.4741 29.9578 36.8476 32.5422 38.5997Z" fill="#C8F1F9"/>
                                            </svg>                                    </button>
                                        <h3><span class="current-month">Mese corrente</span></h3>
                                    <button class="next-month">
                                        <svg width="93" height="64" viewBox="0 0 93 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M61.1456 25.4003L43.438 13.171C42.3514 12.421 40.878 11.9998 39.3418 12C37.8055 12.0003 36.3324 12.422 35.2464 13.1723C34.1603 13.9227 33.5504 14.9403 33.5508 16.0013C33.5511 17.0622 34.1618 18.0796 35.2483 18.8297L52.9559 31.0563C53.1357 31.1802 53.2784 31.3273 53.3757 31.4893C53.473 31.6513 53.5231 31.825 53.5231 32.0003C53.5231 32.1757 53.473 32.3494 53.3757 32.5114C53.2784 32.6733 53.1357 32.8205 52.9559 32.9443L35.2483 45.171C34.1618 45.921 33.5511 46.9384 33.5508 47.9994C33.5504 49.0604 34.1603 50.078 35.2464 50.8283C36.3324 51.5787 37.8055 52.0004 39.3418 52.0007C40.878 52.0009 42.3514 51.5797 43.438 50.8297L61.1456 38.6003C63.6756 36.8482 65.0964 34.4748 65.0964 32.0003C65.0964 29.5259 63.6756 27.1524 61.1456 25.4003Z" fill="#C8F1F9"/>
                                            </svg>                                    
                                        </button>
                                </div>
                                <div class="days days-container"></div>
                            </div>
                            <div class="col-5 reset-padding">
                                <div class="time-selector calendar-selector">
                                    <h3>Orario</h3>
                                </div>
                                <div class="time-options">
                                    <p class="time-option">8:00</p>
                                    <p class="time-option">9:00</p>
                                    <p class="time-option">10:00</p>
                                    <p class="time-option">11:00</p>
                                    <p class="time-option">12:00</p>
                                    <p class="time-option">13:00</p>
                                    <p class="time-option">14:00</p>
                                    <p class="time-option">15:00</p>
                                    <p class="time-option">16:00</p>
                                    <p class="time-option">17:00</p>
                                    <p class="time-option">18:00</p>
                                    <p class="time-option">19:00</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="space-50"></div>
    
    <div class="row padding-100 margin-b-transports">
        <div class="col">
            <div id="calendar-2" class="calendar-wrapper">
                <div class="calendarbody">
                    <div class="calendarheader">
                        <p>Seleziona data e ora della restituzione</p>
                    </div>
                    <div class="container-fluid calendar">
                        <div class="row">
                            <!-- Selezione data -->
                            <div class="col-7 border-right px-0">
                                <div class="calendar-selector">
                                    <button class="prev-month">
                                        <svg width="95" height="64" viewBox="0 0 95 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M32.5422 38.5997L50.6307 50.829C51.7406 51.579 53.2457 52.0002 54.8149 52C56.3842 51.9997 57.8891 51.578 58.9984 50.8277C60.1078 50.0773 60.7308 49.0597 60.7305 47.9987C60.7301 46.9378 60.1064 45.9204 58.9965 45.1703L40.908 32.9437C40.7244 32.8198 40.5786 32.6727 40.4792 32.5107C40.3798 32.3487 40.3286 32.175 40.3286 31.9997C40.3286 31.8243 40.3798 31.6506 40.4792 31.4886C40.5786 31.3267 40.7244 31.1795 40.908 31.0557L58.9965 18.829C60.1064 18.079 60.7301 17.0616 60.7305 16.0006C60.7308 14.9396 60.1078 13.9221 58.9984 13.1717C57.8891 12.4213 56.3842 11.9996 54.815 11.9993C53.2457 11.9991 51.7406 12.4203 50.6307 13.1703L32.5422 25.3997C29.9578 27.1518 28.5065 29.5252 28.5065 31.9997C28.5065 34.4741 29.9578 36.8476 32.5422 38.5997Z" fill="#C8F1F9"/>
                                            </svg>                                    </button>
                                        <h3><span class="current-month">Mese corrente</span></h3>
                                    <button class="next-month">
                                        <svg width="93" height="64" viewBox="0 0 93 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M61.1456 25.4003L43.438 13.171C42.3514 12.421 40.878 11.9998 39.3418 12C37.8055 12.0003 36.3324 12.422 35.2464 13.1723C34.1603 13.9227 33.5504 14.9403 33.5508 16.0013C33.5511 17.0622 34.1618 18.0796 35.2483 18.8297L52.9559 31.0563C53.1357 31.1802 53.2784 31.3273 53.3757 31.4893C53.473 31.6513 53.5231 31.825 53.5231 32.0003C53.5231 32.1757 53.473 32.3494 53.3757 32.5114C53.2784 32.6733 53.1357 32.8205 52.9559 32.9443L35.2483 45.171C34.1618 45.921 33.5511 46.9384 33.5508 47.9994C33.5504 49.0604 34.1603 50.078 35.2464 50.8283C36.3324 51.5787 37.8055 52.0004 39.3418 52.0007C40.878 52.0009 42.3514 51.5797 43.438 50.8297L61.1456 38.6003C63.6756 36.8482 65.0964 34.4748 65.0964 32.0003C65.0964 29.5259 63.6756 27.1524 61.1456 25.4003Z" fill="#C8F1F9"/>
                                            </svg>                                    
                                        </button>
                                </div>
                                <div class="days days-container"></div>
                            </div>
                            <!-- Selezione orario -->
                            <div class="col-5 reset-padding">
                                <div class="time-selector calendar-selector">
                                    <h3>Orario</h3>
                                </div>
                                <div class="time-options">
                                    <p class="time-option">8:00</p>
                                    <p class="time-option">9:00</p>
                                    <p class="time-option">10:00</p>
                                    <p class="time-option">11:00</p>
                                    <p class="time-option">12:00</p>
                                    <p class="time-option">13:00</p>
                                    <p class="time-option">14:00</p>
                                    <p class="time-option">15:00</p>
                                    <p class="time-option">16:00</p>
                                    <p class="time-option">17:00</p>
                                    <p class="time-option">18:00</p>
                                    <p class="time-option">19:00</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row d-flex padding-100 bottom-180"> 
        <div class="form-check d-flex align-items-center">
            <input class="form-check-input checkbox-style" type="checkbox" id="cityPassCheckbox">
            <p class="reset-margin">Ho la patente</p>
        </div> 
    </div>

    <div class="row d-flex justify-content-center bottom-150"> 
        <a href="4.2.3.1_summary-off-road.html" class="btn btn-primary col-auto header-button justify-content-center">Prenota</a>     
    </div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>

/****CALENDARIO 1****/
document.addEventListener('DOMContentLoaded', () => {
    const calendars = document.querySelectorAll('.calendar-wrapper'); 

    calendars.forEach(calendar => {
        const calendarId = calendar.id;
        const currentMonthElement = calendar.querySelector('.current-month');
        const daysContainer = calendar.querySelector('.days-container');
        const prevMonthButton = calendar.querySelector('.prev-month');
        const nextMonthButton = calendar.querySelector('.next-month');
        const timeOptions = calendar.querySelectorAll('.time-option');

        let currentDate = new Date();
        let selectedDay = null;
        let selectedTime = null;

        const savedData = localStorage.getItem(`selectedData-${calendarId}`);
        if (savedData) {
            const parsedData = JSON.parse(savedData);
            console.log('Dati recuperati per il calendario ID ' + calendarId, parsedData);
            selectedDay = document.querySelector(`.day[data-date="${parsedData.date}"]`);
            selectedTime = document.querySelector(`.time-option[data-time="${parsedData.time}"]`);

            if (selectedDay) {
                selectedDay.classList.add('selected');
            }
            if (selectedTime) {
                selectedTime.classList.add('selected');
            }
        }

        function getMonthName(monthIndex) {
            const monthNames = [
                'Gennaio', 'Febbraio', 'Marzo', 'Aprile', 'Maggio', 'Giugno',
                'Luglio', 'Agosto', 'Settembre', 'Ottobre', 'Novembre', 'Dicembre'
            ];
            return monthNames[monthIndex];
        }

        function generateCalendar(date) {
            const year = date.getFullYear();
            const month = date.getMonth();

            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();

            daysContainer.innerHTML = '';

            for (let i = 0; i < firstDay; i++) {
                const emptySlot = document.createElement('div');
                emptySlot.classList.add('day', 'empty');
                daysContainer.appendChild(emptySlot);
            }

            for (let day = 1; day <= daysInMonth; day++) {
                const dayElement = document.createElement('div');
                dayElement.classList.add('day');
                dayElement.textContent = day;
                dayElement.setAttribute('data-date', `${day} ${getMonthName(month)} ${year}`); 

                dayElement.addEventListener('click', () => {
                    if (selectedDay) {
                        selectedDay.classList.remove('selected');
                    }
                    dayElement.classList.add('selected');
                    selectedDay = dayElement;
                    saveSelection(calendarId);
                });

                daysContainer.appendChild(dayElement);
            }

            currentMonthElement.textContent = `${getMonthName(month)} ${year}`;
        }

        prevMonthButton.addEventListener('click', () => {
            currentDate.setMonth(currentDate.getMonth() - 1);
            generateCalendar(currentDate);
        });

        nextMonthButton.addEventListener('click', () => {
            currentDate.setMonth(currentDate.getMonth() + 1);
            generateCalendar(currentDate);
        });

        timeOptions.forEach(time => {
            time.addEventListener('click', () => {
                if (selectedTime) {
                    selectedTime.classList.remove('selected');
                }
                time.classList.add('selected');
                selectedTime = time;
                saveSelection(calendarId);
            });
        });

        generateCalendar(currentDate);

        function saveSelection(calendarId) {
            const selectedDate = selectedDay ? selectedDay.getAttribute('data-date') : null;
            const selectedHour = selectedTime ? selectedTime.textContent.trim() : null;

            if (selectedDate && selectedHour) {
                const selectedData = {
                    id: calendarId, 
                    date: selectedDate,
                    time: selectedHour
                };

                localStorage.setItem(`selectedData-${calendarId}`, JSON.stringify(selectedData));

                console.log('Dati salvati per il calendario ID ' + calendarId, selectedData);
            } else {
                console.warn('Seleziona sia una data che un orario.');
            }
        }
    });
});

/*gestione bottoni assicurazioni*/
document.addEventListener("DOMContentLoaded", () => {
    const baseButton = document.querySelector("#base-button");
    const superButton = document.querySelector("#super-button");

    baseButton.addEventListener("click", () => {
        baseButton.classList.add("selected"); 
        superButton.classList.remove("selected"); 
    });

    superButton.addEventListener("click", () => {
        superButton.classList.add("selected"); 
        baseButton.classList.remove("selected"); 
    });
});

    
    </script>

</body>